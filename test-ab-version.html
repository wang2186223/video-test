<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABç‰ˆæœ¬ç³»ç»Ÿæµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #007AFF;
            padding-bottom: 10px;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #007AFF;
            margin-top: 0;
        }
        .button {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px 10px 10px 0;
            background: #007AFF;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s;
        }
        .button:hover {
            background: #0051D5;
        }
        .button.secondary {
            background: #5AC8FA;
        }
        .button.secondary:hover {
            background: #32AEE8;
        }
        .info {
            background: #E3F2FD;
            padding: 15px;
            border-left: 4px solid #2196F3;
            margin: 15px 0;
            border-radius: 4px;
        }
        .success {
            background: #E8F5E9;
            border-left-color: #4CAF50;
        }
        .warning {
            background: #FFF3E0;
            border-left-color: #FF9800;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .status {
            padding: 10px;
            margin: 15px 0;
            border-radius: 6px;
            font-weight: 500;
        }
        .clear-button {
            background: #FF3B30;
        }
        .clear-button:hover {
            background: #D32F2F;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š ABç‰ˆæœ¬ç³»ç»Ÿæµ‹è¯•å·¥å…·</h1>
        
        <div id="current-status" class="status"></div>
        
        <div class="test-section">
            <h2>ğŸ§ª æµ‹è¯•åœºæ™¯1: å¸¦è¿½è¸ªå‚æ•°è®¿é—®</h2>
            <p>æ¨¡æ‹Ÿç”¨æˆ·ä»Facebookå¹¿å‘Šç‚¹å‡»è¿›å…¥</p>
            <a href="./docs/novels/once-discarded-now-desired/chapter-1.html?fbclid=test123&utm_source=facebook&utm_campaign=test" 
               class="button" target="_blank">
                è®¿é—®ç« èŠ‚ï¼ˆå¸¦fbclidå‚æ•°ï¼‰
            </a>
            <div class="info success">
                <strong>é¢„æœŸç»“æœï¼š</strong>æ˜¾ç¤ºå®Œæ•´ç‰ˆæœ¬ï¼ˆå¸¦AdClickGuideSystemï¼‰ï¼Œå‚æ•°è¢«ä¿å­˜åˆ°localStorage
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§ª æµ‹è¯•åœºæ™¯2: æ— å‚æ•°ç›´æ¥è®¿é—®</h2>
            <p>æ¨¡æ‹Ÿç›´æ¥è®¿é—®æˆ–æœç´¢å¼•æ“æ¥æº</p>
            <a href="./docs/novels/once-discarded-now-desired/chapter-1.html" 
               class="button secondary" target="_blank">
                è®¿é—®ç« èŠ‚ï¼ˆæ— å‚æ•°ï¼‰
            </a>
            <div class="info warning">
                <strong>é¢„æœŸç»“æœï¼š</strong>è‡ªåŠ¨è·³è½¬åˆ°cleanç‰ˆæœ¬ï¼ˆä¸å¸¦AdClickGuideSystemï¼‰
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§ª æµ‹è¯•åœºæ™¯3: æœ‰å†å²è®°å½•åå†æ¬¡è®¿é—®</h2>
            <p>å…ˆæ‰§è¡Œåœºæ™¯1ä¿å­˜å‚æ•°ï¼Œç„¶åæ¸…é™¤URLå‚æ•°å†è®¿é—®</p>
            <ol>
                <li>ç‚¹å‡»ä¸Šé¢"å¸¦fbclidå‚æ•°"çš„é“¾æ¥</li>
                <li>ç„¶åç‚¹å‡»ä¸‹é¢çš„é“¾æ¥ï¼ˆæ— å‚æ•°ï¼‰</li>
            </ol>
            <a href="./docs/novels/once-discarded-now-desired/chapter-2.html" 
               class="button secondary" target="_blank">
                è®¿é—®ç« èŠ‚2ï¼ˆæ— å‚æ•°ï¼‰
            </a>
            <div class="info success">
                <strong>é¢„æœŸç»“æœï¼š</strong>æ˜¾ç¤ºå®Œæ•´ç‰ˆæœ¬ï¼ˆå› ä¸ºlocalStorageä¸­æœ‰å†å²è®°å½•ï¼‰
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”§ å¼€å‘è€…å·¥å…·</h2>
            <button onclick="checkStorage()" class="button">
                æ£€æŸ¥localStorageçŠ¶æ€
            </button>
            <button onclick="clearStorage()" class="button clear-button">
                æ¸…é™¤è¿½è¸ªæ•°æ®
            </button>
            <div id="storage-info" style="margin-top: 15px;"></div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ éªŒè¯æ¸…å•</h2>
            <ul>
                <li>âœ… å¸¦å‚æ•°è®¿é—®æ˜¾ç¤ºå®Œæ•´ç‰ˆæœ¬</li>
                <li>âœ… æ— å‚æ•°è®¿é—®è·³è½¬åˆ°cleanç‰ˆæœ¬</li>
                <li>âœ… localStorageä¿å­˜30å¤©æœ‰æ•ˆ</li>
                <li>âœ… æœ‰å†å²è®°å½•çš„ç”¨æˆ·çœ‹åˆ°å®Œæ•´ç‰ˆæœ¬</li>
                <li>âœ… Cleanç‰ˆæœ¬ä¸åŒ…å«AdClickGuideSystem</li>
                <li>âœ… Cleanç‰ˆæœ¬ä¿ç•™Google Adså’ŒAnalytics</li>
                <li>âœ… è·³è½¬å¯¹ç”¨æˆ·æ— æ„ŸçŸ¥</li>
            </ul>
        </div>
        
        <div class="info">
            <strong>ğŸ’¡ æç¤ºï¼š</strong>
            <ul>
                <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)æŸ¥çœ‹Networkå’ŒConsole</li>
                <li>è§‚å¯Ÿæ˜¯å¦æœ‰é‡å®šå‘å‘ç”Ÿ</li>
                <li>æ£€æŸ¥localStorageä¸­çš„<code>has_tracking_params</code>å€¼</li>
                <li>å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬çš„é¡µé¢å¤§å°å·®å¼‚</li>
            </ul>
        </div>
    </div>
    
    <script>
        function checkStorage() {
            const hasTracking = localStorage.getItem('has_tracking_params');
            const expiry = localStorage.getItem('tracking_params_expiry');
            
            let info = '<div class="info">';
            if (hasTracking) {
                const expiryDate = new Date(parseInt(expiry));
                info += `<strong>âœ… æ£€æµ‹åˆ°è¿½è¸ªå‚æ•°è®°å½•</strong><br>`;
                info += `ä¿å­˜æ—¶é—´: ${hasTracking === 'true' ? 'å·²ä¿å­˜' : 'æœªä¿å­˜'}<br>`;
                info += `è¿‡æœŸæ—¶é—´: ${expiryDate.toLocaleString('zh-CN')}<br>`;
                info += `å‰©ä½™å¤©æ•°: ${Math.ceil((parseInt(expiry) - Date.now()) / (24 * 60 * 60 * 1000))} å¤©`;
            } else {
                info += '<strong>âŒ æœªæ£€æµ‹åˆ°è¿½è¸ªå‚æ•°è®°å½•</strong><br>';
                info += 'ç”¨æˆ·å°†çœ‹åˆ°cleanç‰ˆæœ¬';
            }
            info += '</div>';
            
            document.getElementById('storage-info').innerHTML = info;
            updateStatus();
        }
        
        function clearStorage() {
            localStorage.removeItem('has_tracking_params');
            localStorage.removeItem('tracking_params_expiry');
            document.getElementById('storage-info').innerHTML = 
                '<div class="info success"><strong>âœ… å·²æ¸…é™¤è¿½è¸ªæ•°æ®</strong><br>ä¸‹æ¬¡è®¿é—®å°†é‡æ–°åˆ¤å®šç‰ˆæœ¬</div>';
            updateStatus();
        }
        
        function updateStatus() {
            const hasTracking = localStorage.getItem('has_tracking_params');
            const statusDiv = document.getElementById('current-status');
            
            if (hasTracking === 'true') {
                statusDiv.className = 'status success';
                statusDiv.innerHTML = 'ğŸŸ¢ å½“å‰çŠ¶æ€ï¼šæœ‰è¿½è¸ªè®°å½• - å°†æ˜¾ç¤º<strong>å®Œæ•´ç‰ˆæœ¬</strong>';
            } else {
                statusDiv.className = 'status warning';
                statusDiv.innerHTML = 'ğŸŸ¡ å½“å‰çŠ¶æ€ï¼šæ— è¿½è¸ªè®°å½• - å°†æ˜¾ç¤º<strong>Cleanç‰ˆæœ¬</strong>';
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶æ›´æ–°çŠ¶æ€
        updateStatus();
    </script>
</body>
</html>
